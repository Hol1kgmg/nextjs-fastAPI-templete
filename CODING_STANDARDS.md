# コーディング標準・品質基準

このドキュメントでは、プロジェクトで採用しているコーディング標準と品質基準について説明します。

## 🎯 品質保証の仕組み

### 自動化された品質チェック

このプロジェクトでは、**Git hooks** により以下の品質チェックが自動実行されます：

- **コミット時 (pre-commit)**: 自動修正・品質チェック・重複検出
- **プッシュ時 (pre-push)**: ビルドテスト・CI/CD整合性確認

### 統合コマンド

```bash
# 自動修正の実行
task fix:all      # フロントエンド・バックエンド統合自動修正

# 品質チェックの実行  
task check:all    # フロントエンド・バックエンド統合品質チェック
```

## 🖥️ フロントエンド品質基準

### Biome による品質管理

**設定ファイル**: `frontend/biome.json`

**適用される品質チェック**:
- **リンティング**: コード品質・潜在的バグの検出
- **フォーマット**: 一貫したコードスタイルの適用
- **型チェック**: TypeScriptによる厳密な型検証

### TypeScript 型チェック要件

- **必須**: すべての関数・変数に明確な型定義
- **禁止**: `any`型の使用（やむを得ない場合を除く）
- **推奨**: 戻り値の型注釈を明示

### コード重複検出

**ツール**: similarity-ts  
**閾値**: 80%以上の類似度で警告  
**対象**: TypeScript/JavaScriptファイル

## 🐍 バックエンド品質基準

### Ruff による品質管理

**設定ファイル**: `backend/pyproject.toml`

**適用されるルール**:
- **E**: PEP 8 エラー (コーディング標準)
- **W**: PEP 8 警告
- **F**: Pyflakes (未使用変数・インポート等)
- **B**: flake8-bugbear (バグになりやすいパターン)
- **I**: isort (インポート順序)
- **UP**: pyupgrade (Python構文の現代化)

### MyPy 型チェック要件

- **必須**: すべての関数に型注釈（引数・戻り値）
- **推奨**: 変数の型ヒント（複雑な型の場合）
- **厳格モード**: mypy strict mode を採用

### Python コーディング標準

- **関数・変数**: snake_case
- **クラス**: PascalCase
- **定数**: UPPER_SNAKE_CASE
- **プライベート**: アンダースコア接頭辞

## 🚫 品質チェック失敗時の対処法

### 段階的な対処手順

1. **自動修正の実行**: `task fix:all`
2. **個別エラーの確認**: `task check:all`
3. **手動修正**: 型エラー・リンティングエラーの修正

### よくあるエラーと解決方法

- **TypeScript型エラー**: 型注釈の追加
- **Python型エラー**: 戻り値の型注釈を追加
- **リンティングエラー**: コードスタイルの修正
- **重複検出**: 共通ロジックの抽出・リファクタリング

## 📊 品質メトリクス

### 目標品質レベル

- **型安全性**: 100% (全関数に型注釈)
- **テストカバレッジ**: 80%以上
- **リンティング**: 0エラー・0警告
- **コード重複**: 80%未満の類似度維持

## 🔄 継続的な品質改善

### 定期的なメンテナンス

- **依存関係の更新**: 月次でのパッケージ更新
- **ルールの見直し**: 四半期でのコーディング規約確認
- **メトリクス分析**: 品質指標の定期的な評価

### 品質向上のためのプラクティス

- **コードレビュー**: Pull Request時の相互レビュー
- **ペアプログラミング**: 複雑なロジック実装時
- **リファクタリング**: 技術的負債の継続的な解消

---

**このドキュメントの目的**: 新規開発者がプロジェクトの品質基準を理解し、適切なコードを書くためのガイドライン提供

**最終更新**: 2025年8月
**メンテナンス**: プロジェクトの進化に合わせて継続的に更新